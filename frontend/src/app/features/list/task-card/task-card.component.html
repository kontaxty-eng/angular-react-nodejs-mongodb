<mat-card class="task-card card">
  @if (isEditing && editForm) {
    <form [formGroup]="editForm" (ngSubmit)="onUpdate()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Task Title</mat-label>
        <input matInput formControlName="title" />
        @if (editForm.get('title')?.invalid && editForm.get('title')?.touched) {
          <mat-error>Title is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <input matInput formControlName="description" />
        @if (editForm.get('description')?.invalid && editForm.get('description')?.touched) {
          <mat-error>Description is required</mat-error>
        }
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit">Update Task</button>
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
    </form>
  } @else {
    <mat-card-title>
      {{ task.title }}
      @if (task.completed) {
        <mat-icon color="primary" class="completed-icon">check_circle</mat-icon>
      } @else {
        <mat-icon color="warn" class="pending-icon">pending</mat-icon>
      }
    </mat-card-title>
    <mat-card-content>
      <p>{{ task.description }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="accent" (click)="onEdit()">
        Edit Task
      </button>
      <button mat-raised-button color="accent" (click)="onCompleted()">
        Completed
      </button>
    </mat-card-actions>
  }
</mat-card>
